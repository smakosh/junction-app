# Migration `20201107125939-init`

This migration has been generated by smakosh at 11/7/2020, 1:59:39 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Teacher" (
"id" SERIAL,
"email" text   NOT NULL ,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Student" (
"id" SERIAL,
"email" text   NOT NULL ,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Curriculum" (
"id" SERIAL,
"teacherId" integer   ,
"content" text   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"published" boolean   NOT NULL DEFAULT false,
"title" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Notifications" (
"id" SERIAL,
"title" text   NOT NULL ,
"descrition" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."_CurriculumToStudent" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE UNIQUE INDEX "Teacher.email_unique" ON "public"."Teacher"("email")

CREATE UNIQUE INDEX "Student.email_unique" ON "public"."Student"("email")

CREATE UNIQUE INDEX "_CurriculumToStudent_AB_unique" ON "public"."_CurriculumToStudent"("A", "B")

CREATE INDEX "_CurriculumToStudent_B_index" ON "public"."_CurriculumToStudent"("B")

ALTER TABLE "public"."Curriculum" ADD FOREIGN KEY("teacherId")REFERENCES "public"."Teacher"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."_CurriculumToStudent" ADD FOREIGN KEY("A")REFERENCES "public"."Curriculum"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_CurriculumToStudent" ADD FOREIGN KEY("B")REFERENCES "public"."Student"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201029103546-init..20201107125939-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,30 +3,37 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
-model Post {
-  id        Int      @id @default(autoincrement())
-  authorId  Int?
+model Teacher {
+  id          Int          @id @default(autoincrement())
+  email       String       @unique
+  name        String
+  curriculums Curriculum[]
+}
+
+model Student {
+  id          Int          @id @default(autoincrement())
+  email       String       @unique
+  name        String
+  curriculums Curriculum[]
+}
+
+model Curriculum {
+  id        Int       @id @default(autoincrement())
+  teacherId Int?
   content   String?
-  createdAt DateTime @default(now())
-  published Boolean  @default(false)
+  createdAt DateTime  @default(now())
+  published Boolean   @default(false)
   title     String
-  author    User?    @relation(fields: [authorId], references: [id])
-  Tag       Tag[]
+  teacher   Teacher?  @relation(fields: [teacherId], references: [id])
+  students  Student[]
 }
-model Tag {
-  id   Int    @id @default(autoincrement())
-  name String
-  Post Post[]
+model Notifications {
+  id         Int    @id @default(autoincrement())
+  title      String
+  descrition String
 }
-
-model User {
-  id    Int     @id @default(autoincrement())
-  email String  @unique
-  name  String?
-  posts Post[]
-}
```


